{% extends "base.html" %}
{% block title %}Profile{% endblock %}

{% block content %}

<h1>{{ profile.name }}'s Profile</h1>

<a class="btn" href="{{ url_for('edit_profile', usr=profile.name) }}">
    Edit Profile
</a>

<hr>

<!-- PROFILE INFO CARD -->
<section>
    <h2>Profile Information</h2>

    <p><strong>Major:</strong>
        {{ profile.major if profile.major else "Not set yet" }}
    </p>

    <p><strong>Classes:</strong>
        {{ profile.classes if profile.classes else "No classes listed yet" }}
    </p>

    <p><strong>Interests:</strong>
        {{ profile.interests if profile.interests else "No interests added yet" }}
    </p>

    <p><strong>Bio:</strong></p>
    <p>
        {{ profile.bio if profile.bio else "No bio yet." }}
    </p>
</section>

<hr>

<!-- ACTIONS -->
<section>
    <h2>Actions</h2>
    <a href="{{ url_for('new_post', usr=profile.name) }}">Create Study Tip Post</a> |
    <a href="{{ url_for('create_session', usr=profile.name) }}">Create Study Session</a>

    <form method="POST" action="{{ url_for('send_friend_request', usr=profile.name) }}">
        <button type="submit">Send Friend Request</button>
    </form>
</section>

<hr>

<!-- USER POSTS -->
<section>
    <h2>Your Posts</h2>
    <ul>
    {% for post in posts %}
        <li>
            {{ post.content }}
            <br>
            <small>{{ post.created_at }}</small>
        </li>
    {% else %}
        <li>No posts yet.</li>
    {% endfor %}
    </ul>
</section>

<hr>

<!-- STUDY SESSIONS -->
<section>
    <h2>Your Study Sessions</h2>
    <ul>
    {% for s in sessions %}
        <li>
            <strong>{{ s.title }}</strong><br>
            {{ s.subject }}<br>
            {{ s.date_time }} @ {{ s.location }}
        </li>
    {% else %}
        <li>You haven't created any study sessions yet.</li>
    {% endfor %}
    </ul>
</section>

{% endblock %}
